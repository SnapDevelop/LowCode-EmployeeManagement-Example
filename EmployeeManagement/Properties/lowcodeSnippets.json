{
  "Items": [
    {
      "Category": "Using",
      "Scope": "DalDataContext",
      "Content": "using EmployeeManagement.Contracts;",
      "Position": "",
      "ArgumentType": ""
    },
    {
      "Category": "Code",
      "Scope": "DalDataContext",
      "Content": "public override Task<int> SaveChangesAsync(CancellationToken cancellationToken = default)\r\n        {\r\n            // \r\n            var entries = this.ChangeTracker.Entries();\r\n\r\n            foreach (var entry in entries)\r\n            {\r\n                if (entry.Entity is BaseEntity e && entry.State == EntityState.Modified)\r\n                {\r\n                    e.UpdateTime = DateTime.Now;\r\n                    entry.Property(nameof(e.CreateTime)).IsModified = false;\r\n                }\r\n            }\r\n            \r\n            return base.SaveChangesAsync(cancellationToken);\r\n        }\r\n\r\n        private void Seed(ModelBuilder modelBuilder)\r\n        {\r\n            modelBuilder.Entity<Company>().HasData(\r\n                new Company \r\n                {\r\n                    Id = Guid.Parse(\"1646088D-3E28-466F-98DC-332DA397C9B0\"),\r\n                    CompanyName=\"电信\",\r\n                    CompanySize = CompanySize.Large,\r\n                    Province = \"广东\",\r\n                    City = \"广州\"\r\n                },\r\n                new Company\r\n                {\r\n                    Id = Guid.Parse(\"D8C61D3D-D9E0-4A49-888F-C13260E68115\"),\r\n                    CompanyName = \"移动\",\r\n                    CompanySize = CompanySize.Large,\r\n                    Province = \"广东\",\r\n                    City = \"深圳\"\r\n                },\r\n                new Company\r\n                {\r\n                    Id = Guid.Parse(\"BF3D2F02-B1CA-4C20-90C3-89BE44B43B61\"),\r\n                    CompanyName = \"联通\",\r\n                    CompanySize = CompanySize.Large,\r\n                    Province = \"辽宁\",\r\n                    City = \"沈阳\"\r\n                },\r\n                new Company\r\n                {\r\n                    Id = Guid.Parse(\"38145486-175C-486C-8FD8-1C4F8774E009\"),\r\n                    CompanyName = \"重工\",\r\n                    CompanySize = CompanySize.Big,\r\n                    Province = \"湖南\",\r\n                    City = \"长沙\"\r\n                }\r\n                );\r\n\r\n            modelBuilder.Entity<Department>().HasData(\r\n                new Department \r\n                {\r\n                    Id = Guid.Parse(\"F7EEF1BD-0D9D-42A7-82F4-41A798E7527D\"),\r\n                    DepartmentName = \"研发部\",\r\n                    CompanyId = Guid.Parse(\"1646088D-3E28-466F-98DC-332DA397C9B0\"),               \r\n                },\r\n\t\t\t\tnew Department\r\n                {\r\n                    Id = Guid.Parse(\"F7EEF1BD-0D9D-42A7-82F4-41A798E7527C\"),\r\n                    DepartmentName = \"Web应用研发部\",\r\n                    CompanyId = Guid.Parse(\"1646088D-3E28-466F-98DC-332DA397C9B0\"),\r\n                    SuperiorDepartmentId = Guid.Parse(\"F7EEF1BD-0D9D-42A7-82F4-41A798E7527D\"),\r\n                },\r\n                new Department\r\n                {\r\n                    Id = Guid.Parse(\"F7EEF1BD-0D9D-42A7-82F4-41A798E7527B\"),\r\n                    DepartmentName = \"桌面应用研发部\",\r\n                    CompanyId = Guid.Parse(\"1646088D-3E28-466F-98DC-332DA397C9B0\"),\r\n                    SuperiorDepartmentId = Guid.Parse(\"F7EEF1BD-0D9D-42A7-82F4-41A798E7527D\"),\r\n                },\r\n                new Department\r\n                {\r\n                    Id = Guid.Parse(\"91BB9B7A-F760-4738-B83E-EABD3F2A81A1\"),\r\n                    DepartmentName = \"客服部\",\r\n                    CompanyId = Guid.Parse(\"1646088D-3E28-466F-98DC-332DA397C9B0\"),\r\n                },\r\n                new Department\r\n                {\r\n                    Id = Guid.Parse(\"53B21091-AF08-4A46-8783-52E16721DA18\"),\r\n                    DepartmentName = \"售后部\",\r\n                    CompanyId = Guid.Parse(\"1646088D-3E28-466F-98DC-332DA397C9B0\"),\r\n                },\r\n                new Department\r\n                {\r\n                    Id = Guid.Parse(\"CA98DCFD-B156-4AF5-9665-779F814DB933\"),\r\n                    DepartmentName = \"销售部\",\r\n                    CompanyId = Guid.Parse(\"BF3D2F02-B1CA-4C20-90C3-89BE44B43B61\"),\r\n                }\r\n                );\r\n            modelBuilder.Entity<Employee>().HasData(\r\n                new Employee\r\n                {\r\n                    DepartmentId = Guid.Parse(\"53B21091-AF08-4A46-8783-52E16721DA18\"),\r\n                    FirstName = \"张\",\r\n                    LastName = \"小小\",\r\n                    Gender = Gender.Female,\r\n                    BirthDay = DateOnly.FromDateTime(new DateTime(2000, 7, 2)),\r\n                    EducateSchool = \"南京商务大学\",\r\n                    EducateDate = new DateTime(2020,7,1),\r\n                    Status = EmployeeStatus.IS,\r\n                    Postion = \"调研工程师\",\r\n                    Degree = DegreeType.UG,\r\n                    HireDate = new DateTime(2020,9,2),\r\n                    PhoneNumber=\"13266768732\"\r\n                },\r\n\t\t\t\tnew Employee\r\n                {\r\n\t\t\t\t\tId = Guid.Parse(\"F7EEF1BD-0D9D-42A7-82F5-41A798575276\"),\r\n                    DepartmentId = Guid.Parse(\"53B21091-AF08-4A46-8783-52E16721DA18\"),\r\n                    FirstName = \"许\",\r\n                    LastName = \"鑫\",\r\n                    Gender = Gender.Male,\r\n                    BirthDay = DateOnly.FromDateTime(new DateTime(1987, 9, 15)),\r\n                    EducateSchool = \"北京科技大学\",\r\n                    EducateDate = new DateTime(2008, 7, 15),\r\n                    Status = EmployeeStatus.IS,\r\n                    Postion = \".Net开发工程师\",\r\n                    Degree = DegreeType.HS,\r\n                    HireDate = new DateTime(2023, 4, 11),\r\n                    PhoneNumber = \"13555562714\",\r\n                },\r\n\t\t\t\tnew Employee\r\n                {\r\n                    DepartmentId = Guid.Parse(\"53B21091-AF08-4A46-8783-52E16721DA18\"),\r\n                    FirstName = \"张\",\r\n                    LastName = \"三\",\r\n                    Gender = Gender.Male,\r\n                    BirthDay = DateOnly.FromDateTime(new DateTime(2000, 9, 15)),\r\n                    EducateSchool = \"北京商务大学\",\r\n                    EducateDate = new DateTime(2014, 7, 1),\r\n                    Status = EmployeeStatus.IS,\r\n                    Postion = \"开发工程师\",\r\n                    Degree = DegreeType.HS,\r\n                    HireDate = new DateTime(2023, 4, 11),\r\n                    PhoneNumber = \"13566762735\",\r\n                    ManagerId = Guid.Parse(\"F7EEF1BD-0D9D-42A7-82F5-41A798575276\")\r\n                },\r\n                new Employee\r\n                {\r\n                    DepartmentId = Guid.Parse(\"53B21091-AF08-4A46-8783-52E16721DA18\"),\r\n                    FirstName = \"李\",\r\n                    LastName = \"四\",\r\n                    Gender = Gender.Male,\r\n                    BirthDay = DateOnly.FromDateTime(new DateTime(1998, 9, 15)),\r\n                    EducateSchool = \"北京商务大学\",\r\n                    EducateDate = new DateTime(2023, 7, 1),\r\n                    Status = EmployeeStatus.RN,\r\n                    Postion = \"开发工程师\",\r\n                    Degree = DegreeType.OT,\r\n                    HireDate = new DateTime(2023, 4, 11),\r\n                    PhoneNumber = \"13555562365\",\r\n                    ManagerId = Guid.Parse(\"F7EEF1BD-0D9D-42A7-82F5-41A798575276\")\r\n                },\r\n                new Employee\r\n                {\r\n                    DepartmentId = Guid.Parse(\"53B21091-AF08-4A46-8783-52E16721DA18\"),\r\n                    FirstName = \"李\",\r\n                    LastName = \"强\",\r\n                    Gender = Gender.Male,\r\n                    BirthDay = DateOnly.FromDateTime(new DateTime(1995, 7, 2)),\r\n                    EducateSchool = \"广东网络大学\",\r\n                    EducateDate = new DateTime(2020, 7, 1),\r\n                    Status = EmployeeStatus.FL,\r\n                    Postion = \"高级客服\",\r\n                    Degree = DegreeType.MT,\r\n                    HireDate = new DateTime(2020, 9, 2),\r\n                    PhoneNumber = \"18537728734\"\r\n                }\r\n                );\r\n        }",
      "Position": "EndOfClass",
      "ArgumentType": ""
    },
    {
      "Category": "Code",
      "Scope": "DalDataContext",
      "Content": "this.Seed(modelBuilder);",
      "Position": "EndOfOnModelCreating",
      "ArgumentType": ""
    }
  ]
}